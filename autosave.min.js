// bookmarklett url for Gravit autosave
javascript:(function($){ idleTimer=null,idleState=!1,idleWait=1e4,saveTimer=null,saveTime=3e5,timeStarted=!1,timetosave=!1,changesmade=!1,savebutton=$('.toolbar-button[data-action="file.save"] > button'),$('.toolbar-button[data-action="file.save"]').append('<div class="autoSaveEnabled">Autosave Enabled</div><div class="pulsatingCircle"><span class="firstCircle"></span><span class="secondCircle"></span></div><style>.toolbar-button[data-action="file.save"]{position:relative}.toolbar-button[data-action="file.save"] button{z-index:1;position:relative}.pulsatingCircle{width:10px;height:10px;display:none;position:absolute;top:50%;left:50%;margin:-12px 0 0 -5px;transform:scale(3,3);-webkit-transform:scale(3,3);z-index:0}.toolbar-button[data-action="file.save"].reminder .pulsatingCircle{display:block}.firstCircle,.secondCircle{top:50%;left:50%;display:block;border-radius:50%;position:absolute;vertical-align:middle}.firstCircle{width:16px;height:16px;margin:-9px 0 0 -9px;border:1px solid #ccc;animation:2s pulseIn ease-in-out infinite;-webkit-animation:2s pulseIn ease-in-out infinite}.secondCircle{width:24px;height:24px;border:1px solid #ccc;margin:-13px 0 0 -13px;animation:2s pulseIn .5s ease-in-out infinite;-webkit-animation:2s pulseIn .5s ease-in-out infinite}@keyframes pulseIn{0%,100%{opacity:0;transform:scale(.2,.2)}50%{opacity:1;transform:scale(1,1)}}@-webkit-keyframes pulseIn{0%,100%{opacity:0;-webkit-transform:scale(.2,.2)}50%{opacity:1;-webkit-transform:scale(1,1)}}.autoSaveEnabled{position:fixed;top:45%;left:50%;z-index:99999999;background:rgba(27,134,27,.69);border:1px solid green;font-size:2em;padding:12px 24px;border-radius:4px;opacity:0;transform:translate(-50%,-50%);transition:all .3s ease}.autoSaveEnabled.enter{top:50%;opacity:1}</style>'),needsSaving=function(){timetosave=!0,1==idleState&&saveFile()},saveFile=function(){timetosave=!1,timeStarted=!1,savebutton.parent(".toolbar-button").removeClass("reminder"),savebutton.click(),clearTimeout(saveTimer)},$(".autoSaveEnabled").css("opacity"),$(".autoSaveEnabled").addClass("enter"),setTimeout(function(){$(".autoSaveEnabled").removeClass("enter")},2e3),$("*").bind("mousemove keydown scroll",function(){savebutton.attr("disabled")||timeStarted||(timeStarted=!0,saveTimer=setTimeout(needsSaving,saveTime)),"disabled"===savebutton.attr("disabled")&&1==timetosave&&saveFile(),clearTimeout(idleTimer),idleState=!1,1==timetosave&&savebutton.parent(".toolbar-button").addClass("reminder"),idleTimer=setTimeout(function(){idleState=!0,1==timetosave&&saveFile()},idleWait)}); })(jQuery)

// bookmarklett url for Gravit autosave
// with console logs
javascript:(function($){ idleTimer=null,idleState=!1,idleWait=1e4,saveTimer=null,saveTime=3e5,timeStarted=!1,timetosave=!1,changesmade=!1,savebutton=$('.toolbar-button[data-action="file.save"] > button'),$('.toolbar-button[data-action="file.save"]').append('<div class="autoSaveEnabled">Autosave Enabled</div><div class="pulsatingCircle"><span class="firstCircle"></span><span class="secondCircle"></span></div><style>.toolbar-button[data-action="file.save"]{position:relative}.toolbar-button[data-action="file.save"] button{z-index:1;position:relative}.pulsatingCircle{width:10px;height:10px;display:none;position:absolute;top:50%;left:50%;margin:-12px 0 0 -5px;transform:scale(3,3);-webkit-transform:scale(3,3);z-index:0}.toolbar-button[data-action="file.save"].reminder .pulsatingCircle{display:block}.firstCircle,.secondCircle{top:50%;left:50%;display:block;border-radius:50%;position:absolute;vertical-align:middle}.firstCircle{width:16px;height:16px;margin:-9px 0 0 -9px;border:1px solid #ccc;animation:2s pulseIn ease-in-out infinite;-webkit-animation:2s pulseIn ease-in-out infinite}.secondCircle{width:24px;height:24px;border:1px solid #ccc;margin:-13px 0 0 -13px;animation:2s pulseIn .5s ease-in-out infinite;-webkit-animation:2s pulseIn .5s ease-in-out infinite}@keyframes pulseIn{0%,100%{opacity:0;transform:scale(.2,.2)}50%{opacity:1;transform:scale(1,1)}}@-webkit-keyframes pulseIn{0%,100%{opacity:0;-webkit-transform:scale(.2,.2)}50%{opacity:1;-webkit-transform:scale(1,1)}}.autoSaveEnabled{position:fixed;top:45%;left:50%;z-index:99999999;background:rgba(27,134,27,.69);border:1px solid green;font-size:2em;padding:12px 24px;border-radius:4px;opacity:0;transform:translate(-50%,-50%);transition:all .3s ease}.autoSaveEnabled.enter{top:50%;opacity:1}</style>'),needsSaving=function(){timetosave=!0,console.log("Its time to save!"),1==idleState&&saveFile()},saveFile=function(){timetosave=!1,timeStarted=!1,savebutton.parent(".toolbar-button").removeClass("reminder"),savebutton.click(),clearTimeout(saveTimer),console.log("savebutton clicked, savetimer reset")},$(".autoSaveEnabled").css("opacity"),$(".autoSaveEnabled").addClass("enter"),setTimeout(function(){$(".autoSaveEnabled").removeClass("enter")},2e3),$("*").bind("mousemove keydown scroll",function(){1==idleState&&(idleState=!1,console.log("user is active")),savebutton.attr("disabled")||timeStarted||(timeStarted=!0,saveTimer=setTimeout(needsSaving,saveTime),console.log("save timer started")),"disabled"===savebutton.attr("disabled")&&1==timetosave&&saveFile(),1==timetosave&&savebutton.parent(".toolbar-button").addClass("reminder"),clearTimeout(idleTimer),idleTimer=setTimeout(function(){idleState=!0,console.log("user is idle"),1==timetosave&&saveFile()},idleWait)}); })(jQuery)

// MrColes bookmark creator
javascript:(function()%7BidleTimer%3Dnull%2CidleState%3D!1%2CidleWait%3D1e4%2CsaveTimer%3Dnull%2CsaveTime%3D3e5%2CtimeStarted%3D!1%2Ctimetosave%3D!1%2Cchangesmade%3D!1%2Csavebutton%3D%24('.toolbar-button%5Bdata-action%3D%22file.save%22%5D%20%3E%20button')%2C%24('.toolbar-button%5Bdata-action%3D%22file.save%22%5D').append('%3Cdiv%20class%3D%22autoSaveEnabled%22%3EAutosave%20Enabled%3C%2Fdiv%3E%3Cdiv%20class%3D%22pulsatingCircle%22%3E%3Cspan%20class%3D%22firstCircle%22%3E%3C%2Fspan%3E%3Cspan%20class%3D%22secondCircle%22%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3Cstyle%3E.toolbar-button%5Bdata-action%3D%22file.save%22%5D%7Bposition%3Arelative%7D.toolbar-button%5Bdata-action%3D%22file.save%22%5D%20button%7Bz-index%3A1%3Bposition%3Arelative%7D.pulsatingCircle%7Bwidth%3A10px%3Bheight%3A10px%3Bdisplay%3Anone%3Bposition%3Aabsolute%3Btop%3A50%25%3Bleft%3A50%25%3Bmargin%3A-12px%200%200%20-5px%3Btransform%3Ascale(3%2C3)%3B-webkit-transform%3Ascale(3%2C3)%3Bz-index%3A0%7D.toolbar-button%5Bdata-action%3D%22file.save%22%5D.reminder%20.pulsatingCircle%7Bdisplay%3Ablock%7D.firstCircle%2C.secondCircle%7Btop%3A50%25%3Bleft%3A50%25%3Bdisplay%3Ablock%3Bborder-radius%3A50%25%3Bposition%3Aabsolute%3Bvertical-align%3Amiddle%7D.firstCircle%7Bwidth%3A16px%3Bheight%3A16px%3Bmargin%3A-9px%200%200%20-9px%3Bborder%3A1px%20solid%20%23ccc%3Banimation%3A2s%20pulseIn%20ease-in-out%20infinite%3B-webkit-animation%3A2s%20pulseIn%20ease-in-out%20infinite%7D.secondCircle%7Bwidth%3A24px%3Bheight%3A24px%3Bborder%3A1px%20solid%20%23ccc%3Bmargin%3A-13px%200%200%20-13px%3Banimation%3A2s%20pulseIn%20.5s%20ease-in-out%20infinite%3B-webkit-animation%3A2s%20pulseIn%20.5s%20ease-in-out%20infinite%7D%40keyframes%20pulseIn%7B0%25%2C100%25%7Bopacity%3A0%3Btransform%3Ascale(.2%2C.2)%7D50%25%7Bopacity%3A1%3Btransform%3Ascale(1%2C1)%7D%7D%40-webkit-keyframes%20pulseIn%7B0%25%2C100%25%7Bopacity%3A0%3B-webkit-transform%3Ascale(.2%2C.2)%7D50%25%7Bopacity%3A1%3B-webkit-transform%3Ascale(1%2C1)%7D%7D.autoSaveEnabled%7Bposition%3Afixed%3Btop%3A45%25%3Bleft%3A50%25%3Bz-index%3A99999999%3Bbackground%3Argba(27%2C134%2C27%2C.69)%3Bborder%3A1px%20solid%20green%3Bfont-size%3A2em%3Bpadding%3A12px%2024px%3Bborder-radius%3A4px%3Bopacity%3A0%3Btransform%3Atranslate(-50%25%2C-50%25)%3Btransition%3Aall%20.3s%20ease%7D.autoSaveEnabled.enter%7Btop%3A50%25%3Bopacity%3A1%7D%3C%2Fstyle%3E')%2CneedsSaving%3Dfunction()%7Btimetosave%3D!0%2Cconsole.log(%22Its%20time%20to%20save!%22)%2C1%3D%3DidleState%26%26saveFile()%7D%2CsaveFile%3Dfunction()%7Btimetosave%3D!1%2CtimeStarted%3D!1%2Csavebutton.parent(%22.toolbar-button%22).removeClass(%22reminder%22)%2Csavebutton.click()%2CclearTimeout(saveTimer)%2Cconsole.log(%22savebutton%20clicked%2C%20savetimer%20reset%22)%7D%2C%24(%22.autoSaveEnabled%22).css(%22opacity%22)%2C%24(%22.autoSaveEnabled%22).addClass(%22enter%22)%2CsetTimeout(function()%7B%24(%22.autoSaveEnabled%22).removeClass(%22enter%22)%7D%2C2e3)%2C%24(%22*%22).bind(%22mousemove%20keydown%20scroll%22%2Cfunction()%7B1%3D%3DidleState%26%26(idleState%3D!1%2Cconsole.log(%22user%20is%20active%22))%2Csavebutton.attr(%22disabled%22)%7C%7CtimeStarted%7C%7C(timeStarted%3D!0%2CsaveTimer%3DsetTimeout(needsSaving%2CsaveTime)%2Cconsole.log(%22save%20timer%20started%22))%2C%22disabled%22%3D%3D%3Dsavebutton.attr(%22disabled%22)%26%261%3D%3Dtimetosave%26%26saveFile()%2C1%3D%3Dtimetosave%26%26savebutton.parent(%22.toolbar-button%22).addClass(%22reminder%22)%2CclearTimeout(idleTimer)%2CidleTimer%3DsetTimeout(function()%7BidleState%3D!0%2Cconsole.log(%22user%20is%20idle%22)%2C1%3D%3Dtimetosave%26%26saveFile()%7D%2CidleWait)%7D)%7D)()