Gravit.io Autosaver
===================

I've been using Gravit.io for a few weeks now, and I love it! As an avid Adobe Fireworks user, I have been looking for quite some time for something that could replace it since it is no longer supported. Enter Gravit.io and I immediately fell in love.

After much use however, I noticed that there isn't a feature to autosave :( There have been plenty of times where autosave would have saved me from hours of work (almost everything autosaves these days, I got out of practice). Gravit said they may or may not be working on an autosave feature, so I just decided to make my own simple js bookmarklet hack. It is pretty simple, and isn't optimized by any means, but it gets the job done.

Drag/Add one of these bookmarklets to your bookmarks bar and try it out
[Gravit Autoplay](javascript:%28function%28%29%7BidleTimer=null,idleState=!1,idleWait=1e4,saveTimer=null,saveTime=3e5,timeStarted=!1,timetosave=!1,changesmade=!1,savebutton=$%28%27.toolbar-button%5Bdata-action=%22file.save%22%5D%20%3E%20button%27%29,$%28%27.toolbar-button%5Bdata-action=%22file.save%22%5D%27%29.append%28%27%3Cdiv%20class=%22autoSaveEnabled%22%3EAutosave%20Enabled%3C/div%3E%3Cdiv%20class=%22pulsatingCircle%22%3E%3Cspan%20class=%22firstCircle%22%3E%3C/span%3E%3Cspan%20class=%22secondCircle%22%3E%3C/span%3E%3C/div%3E%3Cstyle%3E.toolbar-button%5Bdata-action=%22file.save%22%5D%7Bposition:relative%7D.toolbar-button%5Bdata-action=%22file.save%22%5D%20button%7Bz-index:1;position:relative%7D.pulsatingCircle%7Bwidth:10px;height:10px;display:none;position:absolute;top:50%25;left:50%25;margin:-12px%200%200%20-5px;transform:scale%283,3%29;-webkit-transform:scale%283,3%29;z-index:0%7D.toolbar-button%5Bdata-action=%22file.save%22%5D.reminder%20.pulsatingCircle%7Bdisplay:block%7D.firstCircle,.secondCircle%7Btop:50%25;left:50%25;display:block;border-radius:50%25;position:absolute;vertical-align:middle%7D.firstCircle%7Bwidth:16px;height:16px;margin:-9px%200%200%20-9px;border:1px%20solid%20#ccc;animation:2s%20pulseIn%20ease-in-out%20infinite;-webkit-animation:2s%20pulseIn%20ease-in-out%20infinite%7D.secondCircle%7Bwidth:24px;height:24px;border:1px%20solid%20#ccc;margin:-13px%200%200%20-13px;animation:2s%20pulseIn%20.5s%20ease-in-out%20infinite;-webkit-animation:2s%20pulseIn%20.5s%20ease-in-out%20infinite%7D@keyframes%20pulseIn%7B0%25,100%25%7Bopacity:0;transform:scale%28.2,.2%29%7D50%25%7Bopacity:1;transform:scale%281,1%29%7D%7D@-webkit-keyframes%20pulseIn%7B0%25,100%25%7Bopacity:0;-webkit-transform:scale%28.2,.2%29%7D50%25%7Bopacity:1;-webkit-transform:scale%281,1%29%7D%7D.autoSaveEnabled%7Bposition:fixed;top:45%25;left:50%25;z-index:99999999;background:rgba%2827,134,27,.69%29;border:1px%20solid%20green;font-size:2em;padding:12px%2024px;border-radius:4px;opacity:0;transform:translate%28-50%25,-50%25%29;transition:all%20.3s%20ease%7D.autoSaveEnabled.enter%7Btop:50%25;opacity:1%7D%3C/style%3E%27%29,needsSaving=function%28%29%7Btimetosave=!0,console.log%28%22Its%20time%20to%20save!%22%29,1==idleState&&saveFile%28%29%7D,saveFile=function%28%29%7Btimetosave=!1,timeStarted=!1,savebutton.parent%28%22.toolbar-button%22%29.removeClass%28%22reminder%22%29,savebutton.click%28%29,clearTimeout%28saveTimer%29,console.log%28%22savebutton%20clicked,%20savetimer%20reset%22%29%7D,$%28%22.autoSaveEnabled%22%29.css%28%22opacity%22%29,$%28%22.autoSaveEnabled%22%29.addClass%28%22enter%22%29,setTimeout%28function%28%29%7B$%28%22.autoSaveEnabled%22%29.removeClass%28%22enter%22%29%7D,2e3%29,$%28%22*%22%29.bind%28%22mousemove%20keydown%20scroll%22,function%28%29%7B1==idleState&&%28idleState=!1,console.log%28%22user%20is%20active%22%29%29,savebutton.attr%28%22disabled%22%29%7C%7CtimeStarted%7C%7C%28timeStarted=!0,saveTimer=setTimeout%28needsSaving,saveTime%29,console.log%28%22save%20timer%20started%22%29%29,%22disabled%22===savebutton.attr%28%22disabled%22%29&&1==timetosave&&saveFile%28%29,1==timetosave&&savebutton.parent%28%22.toolbar-button%22%29.addClass%28%22reminder%22%29,clearTimeout%28idleTimer%29,idleTimer=setTimeout%28function%28%29%7BidleState=!0,console.log%28%22user%20is%20idle%22%29,1==timetosave&&saveFile%28%29%7D,idleWait%29%7D%29%7D%29%28%29)
[Gravit Autoplay](javascript:%28function%28%29%7BidleTimer=null,idleState=!1,idleWait=1e4,saveTimer=null,saveTime=3e5,timeStarted=!1,timetosave=!1,changesmade=!1,savebutton=$%28%27.toolbar-button%5Bdata-action=%22file.save%22%5D%20%3E%20button%27%29,$%28%27.toolbar-button%5Bdata-action=%22file.save%22%5D%27%29.append%28%27%3Cdiv%20class=%22autoSaveEnabled%22%3EAutosave%20Enabled%3C/div%3E%3Cdiv%20class=%22pulsatingCircle%22%3E%3Cspan%20class=%22firstCircle%22%3E%3C/span%3E%3Cspan%20class=%22secondCircle%22%3E%3C/span%3E%3C/div%3E%3Cstyle%3E.toolbar-button%5Bdata-action=%22file.save%22%5D%7Bposition:relative%7D.toolbar-button%5Bdata-action=%22file.save%22%5D%20button%7Bz-index:1;position:relative%7D.pulsatingCircle%7Bwidth:10px;height:10px;display:none;position:absolute;top:50%25;left:50%25;margin:-12px%200%200%20-5px;transform:scale%283,3%29;-webkit-transform:scale%283,3%29;z-index:0%7D.toolbar-button%5Bdata-action=%22file.save%22%5D.reminder%20.pulsatingCircle%7Bdisplay:block%7D.firstCircle,.secondCircle%7Btop:50%25;left:50%25;display:block;border-radius:50%25;position:absolute;vertical-align:middle%7D.firstCircle%7Bwidth:16px;height:16px;margin:-9px%200%200%20-9px;border:1px%20solid%20#ccc;animation:2s%20pulseIn%20ease-in-out%20infinite;-webkit-animation:2s%20pulseIn%20ease-in-out%20infinite%7D.secondCircle%7Bwidth:24px;height:24px;border:1px%20solid%20#ccc;margin:-13px%200%200%20-13px;animation:2s%20pulseIn%20.5s%20ease-in-out%20infinite;-webkit-animation:2s%20pulseIn%20.5s%20ease-in-out%20infinite%7D@keyframes%20pulseIn%7B0%25,100%25%7Bopacity:0;transform:scale%28.2,.2%29%7D50%25%7Bopacity:1;transform:scale%281,1%29%7D%7D@-webkit-keyframes%20pulseIn%7B0%25,100%25%7Bopacity:0;-webkit-transform:scale%28.2,.2%29%7D50%25%7Bopacity:1;-webkit-transform:scale%281,1%29%7D%7D.autoSaveEnabled%7Bposition:fixed;top:45%25;left:50%25;z-index:99999999;background:rgba%2827,134,27,.69%29;border:1px%20solid%20green;font-size:2em;padding:12px%2024px;border-radius:4px;opacity:0;transform:translate%28-50%25,-50%25%29;transition:all%20.3s%20ease%7D.autoSaveEnabled.enter%7Btop:50%25;opacity:1%7D%3C/style%3E%27%29,needsSaving=function%28%29%7Btimetosave=!0,1==idleState&&saveFile%28%29%7D,saveFile=function%28%29%7Btimetosave=!1,timeStarted=!1,savebutton.parent%28%22.toolbar-button%22%29.removeClass%28%22reminder%22%29,savebutton.click%28%29,clearTimeout%28saveTimer%29%7D,$%28%22.autoSaveEnabled%22%29.css%28%22opacity%22%29,$%28%22.autoSaveEnabled%22%29.addClass%28%22enter%22%29,setTimeout%28function%28%29%7B$%28%22.autoSaveEnabled%22%29.removeClass%28%22enter%22%29%7D,2e3%29,$%28%22*%22%29.bind%28%22mousemove%20keydown%20scroll%22,function%28%29%7Bsavebutton.attr%28%22disabled%22%29%7C%7CtimeStarted%7C%7C%28timeStarted=!0,saveTimer=setTimeout%28needsSaving,saveTime%29%29,%22disabled%22===savebutton.attr%28%22disabled%22%29&&1==timetosave&&saveFile%28%29,clearTimeout%28idleTimer%29,idleState=!1,1==timetosave&&savebutton.parent%28%22.toolbar-button%22%29.addClass%28%22reminder%22%29,idleTimer=setTimeout%28function%28%29%7BidleState=!0,1==timetosave&&saveFile%28%29%7D,idleWait%29%7D%29%7D%29%28%29) (console logging included)

----------


How it works
-------------

When you click on this bookmark while in your workspace, this will enable autosave which saves the document every 5 minutes. After 5 minutes, if you are still working, autosave won't interrupt what you are doing, instead it will just give you a reminder that its time to save the document. Which you can ignore and keep working of course, or save it, your choice.
![enter image description here](https://github.com/ramonchito2/Gravit-Autosaver/blob/master/autosavereminder.gif?raw=true)

If any point you become idle and haven't saved in more than 5 minutes (idle meaning you haven't manipulated the page for more than 10 seconds - e.g. moved to new tab, walked away, etc.), the autosaver will finish saving for you.

> **If you want to change the autosave time limit or idle time, you can find that in the js files:**

>idleTimer   = null;
idleState   = false;
idleWait    = 10000; // 10 seconds
saveTimer   = null;
saveTime    = 300000; // 5 minutes
timeStarted = false;
timetosave  = false;
changesmade = false;
